{% if show_date %}
    {% set col1 = "<td class=\"datetime\">%s</td>" % format_datetime(s.timestamp, timezone, locale=locale) %}
{% else %}
    {% set col1 = "<td class=\"time\">%s</td>" % format_time(s.timestamp, timezone, locale=locale) %}
{% end %}

{% if sr is None or not sr.compiled() %}
<tr data-submission="{{ s_idx }}" data-status="1">
    {% raw col1 %}
    <td class="status">
        {{ _("Compiling...") }}
    </td>
    {% if score_type is not None %}
        {% if score_type.feedback() != "full" %}
        <td class="public_score undefined">{{ _("N/A") }}</td>
        {% end %}
    <td class="total_score undefined">{{ _("N/A") }}</td>
    {% end %}
    <td class="verdict"> {{ _("pending...") }} </td>
{% elif sr.compilation_outcome == "fail" %}
<tr data-submission="{{ s_idx }}" data-status="2">
    {% raw col1 %}
    <td class="status">
        {{ _("Compilation failed") }}
        <a class="details">{{ _("details") }}</a>
    </td>
    {% if score_type is not None %}
        {% if score_type.feedback() != "full" %}
        <td class="public_score undefined">{{ _("N/A") }}</td>
        {% end %}
    <td class="total_score undefined">{{ _("N/A") }}</td>
    {% end %}
    {% comment TODO %}
    <td class="verdict"> {{ _("oops") }} </td>
{% elif not sr.evaluated() %}
<tr data-submission="{{ s_idx }}" data-status="3">
    {% raw col1 %}
    <td class="status">
        {{ _("Evaluating...") }}
    </td>
    {% if score_type is not None %}
        {% if score_type.feedback() != "full" %}
        <td class="public_score undefined">{{ _("N/A") }}</td>
        {% end %}
    <td class="total_score undefined">{{ _("N/A") }}</td>
    {% end %}
    <td class="verdict">{{ _("pending...") }} </td>
{% elif not sr.scored() %}
<tr data-submission="{{ s_idx }}" data-status="4">
    {% raw col1 %}
    <td class="status">
        {{ _("Scoring...") }}
    </td>
    {% if score_type is not None %}
        {% if score_type.feedback() != "full" %}
        <td class="public_score undefined">{{ _("N/A") }}</td>
        {% end %}
    <td class="total_score undefined">{{ _("N/A") }}</td>
    {% end %}
    <td class="datetime">{{ _("pending...") }} </td>
{% else %}
    {% set details = json.loads(sr.unit_test_score_details) %}
    {% set verdict = details.get("verdict", (0, None)) %}
    {% set bgc = "class=\"%s\"" % ("score_100" if verdict[0] == 1 else "score_0") %}
<tr data-submission="{{ s_idx }}" data-status="5"
    {% raw bgc %}>
    {% raw col1 %}
    <td class="status">
        {{ _("Evaluated") }}
        <a class="details">{{ _("details") }}</a>
    </td>

    {% if score_type is not None %}
        {% set max_public_score = score_type.unit_test_expected_scores(s.additional_info)[0] %}
        {% set max_score = score_type.unit_test_expected_scores(s.additional_info)[1] %}
        {% if score_type.feedback() != "full" %}
    <td class="public_score {{ get_score_class(sr.public_score, max_public_score) }}">

            {{ "%g" % round(sr.public_score, task.score_precision) }} / {{ "%g" % round(max_public_score, task.score_precision) }}
    </td>
        {% end %}
        {% if True %}
            {% if score_type is not None and score_type.max_score != 0 %}
        <td class="total_score {{ get_score_class(sr.score, max_score) }}">
                {{ "%g" % round(sr.score, task.score_precision) }} / {{ "%g" % round(max_score, task.score_precision) }}
        </td>
            {% else %}
        <td class="total_score">
                {{ "%g" % round(sr.score, task.score_precision) }}
        </td>
            {% end %}
        {% else %}
        <td class="total_score undefined">
            {{ _("N/A") }}
        </td>
        {% end %}
    {% end %}
    <td class="verdict"> {{verdict[1]}} </td>
{% end %}
</tr>
